{% extends base_template %}

{% block content %}
<h2>Chat with {{ receiver_name }}</h2>

<!-- Chat messages container -->
<div class="chat-messages" style="border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: scroll; margin-bottom: 20px;">
  {% if messages %}
    {% for msg in messages %}
      <p>
          <strong>{{ msg.SenderName }}:</strong> {{ msg.Message }}
          {% if msg.ImageURL %}
            <br><img src="{{ msg.ImageURL }}" alt="image" style="max-height: 100px;">
          {% endif %}
          <br><small>{{ msg.Timestamp }}</small>
      </p>
      <hr>
    {% endfor %}
  {% else %}
    <p>No messages yet. Start the conversation!</p>
  {% endif %}
</div>

<!-- Message input form -->
<form method="POST">
  <textarea name="message" placeholder="Type your message..." rows="3" style="width: 100%;" required></textarea>
  <input type="text" name="image_url" placeholder="Optional image URL" style="width: 100%; margin-top: 10px;">
  <button class="cta-button" type="submit" style="margin-top: 10px;">Send</button>
</form>

<!-- Back to user list -->
<a href="{{ url_for('chat_users') }}">â¬… Back to Users</a>

{% endblock %}
